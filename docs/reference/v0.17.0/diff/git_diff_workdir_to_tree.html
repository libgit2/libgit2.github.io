---
title: git_diff_workdir_to_tree (libgit2 v0.17.0)
layout: default
---

      <div class="api function">
        <div class="apiBreadcrumb functionBreadcrumb">
          <ul>
            <li><a href="/docs/reference/v0.17.0/index.html">API Documentation</a></li>
            <li><a href="/docs/reference/v0.17.0/diff/index.html">diff</a></li>
          </ul>
        </div>
        <div class="apiHeader functionHeader">
          <h2 class="apiName functionName">git_diff_workdir_to_tree</h2>

           <script src="/js/minisearch.js"></script>
           <script src="/js/search.js"></script>
           <div class="headerSearchArea functionHeaderSearchArea" id="headersearcharea">
             <input class="headerSearchBox functionHeaderSearchBox" id="headersearchbox" placeholder="Search..." onInput="handleSearchSuggest({ version: 'v0.17.0' })" onFocusIn="handleSearchSuggest({ version: 'v0.17.0' })" onKeyUp="if (event.code === 'Enter') { submitSearch({ version: 'v0.17.0' }); }"/>
             <div class="headerSearchResults functionHeaderSearchResults" id="headersearchresults">
             </div>
           </div>

          <div class="apiHeaderVersionSelect functionHeaderVersionSelect">
            <span>Version:</span>
            <select onChange="window.location.href = this.value">
              <option value="/docs/reference/v0.17.0/diff/git_diff_workdir_to_tree.html" selected>v0.17.0</option>
            </select>
          </div>
        </div>


        <div class="apiDescription functionDescription">
        <p>Compute a difference between the working directory and a tree.</p>

        <p>This returns strictly the differences between the tree and the
files contained in the working directory, regardless of the state
of files in the index.  There is no direct equivalent in C git.</p>

        <p>This is <em>NOT</em> the same as 'git diff HEAD' or 'git diff
&lt;SHA&gt;'.  Those
commands diff the tree, the index, and the workdir.  To emulate those
functions, call <a href="/docs/reference/v0.17.0/diff/git_diff_index_to_tree.html" class="apiLink functionLink"><code><span class="codeWord">git_diff_index_to_tree</span></code></a> and <a href="/docs/reference/v0.17.0/diff/git_diff_workdir_to_index.html" class="apiLink functionLink"><code><span class="codeWord">git_diff_workdir_to_index</span></code></a>,
then call <a href="/docs/reference/v0.17.0/diff/git_diff_merge.html" class="apiLink functionLink"><code><span class="codeWord">git_diff_merge</span></code></a> on the results.</p>

        </div>

        <h3 class="apiSignatureHeader functionSignatureHeader">Signature</h3>
        <div class="apiSignatureLink functionSignatureLink">
          <a href="https://github.com/libgit2/libgit2/blob/v0.17.0/include/git2/diff.h#L265" target="_blank" rel="noopener">GitHub</a>
        </div>
        <div class="apiSignature functionSignature">
          int git_diff_workdir_to_tree(<span class="apiSignatureParameter functionSignatureParameter">git_repository *repo</span>, <span class="apiSignatureParameter functionSignatureParameter">const git_diff_options *opts</span>, <span class="apiSignatureParameter functionSignatureParameter">git_tree *old_tree</span>, <span class="apiSignatureParameter functionSignatureParameter">git_diff_list **diff</span>);
        </div>

        <h3 class="apiParametersHeader functionParametersHeader">Parameters</h3>
        <div class="apiParameters functionParameters">
          <div class="apiParameter functionParameter apiParameterIn functionParameterIn">
            <div class="apiParameterType functionParameterType">
              <a href="/docs/reference/v0.17.0/repository/git_repository.html" class="apiLink objectLink">git_repository *</a>
            </div>
            <div class="apiParameterDirection functionParameterDirection apiParameterDirectionIn functionParameterDirectionIn">
              In
            </div>
            <div class="apiParameterName functionParameterName">
              repo
            </div>
            <div class="apiParameterDescription functionParameterDescription">
              <p>The repository containing the tree.</p> 
            </div>
          </div>
          <div class="apiParameter functionParameter apiParameterIn functionParameterIn">
            <div class="apiParameterType functionParameterType">
              <a href="/docs/reference/v0.17.0/diff/git_diff_options.html" class="apiLink structLink">const git_diff_options *</a>
            </div>
            <div class="apiParameterDirection functionParameterDirection apiParameterDirectionIn functionParameterDirectionIn">
              In
            </div>
            <div class="apiParameterName functionParameterName">
              opts
            </div>
            <div class="apiParameterDescription functionParameterDescription">
              <p>Structure with options to influence diff or NULL for defaults.</p> 
            </div>
          </div>
          <div class="apiParameter functionParameter apiParameterIn functionParameterIn">
            <div class="apiParameterType functionParameterType">
              <a href="/docs/reference/v0.17.0/tree/git_tree.html" class="apiLink objectLink">git_tree *</a>
            </div>
            <div class="apiParameterDirection functionParameterDirection apiParameterDirectionIn functionParameterDirectionIn">
              In
            </div>
            <div class="apiParameterName functionParameterName">
              old_tree
            </div>
            <div class="apiParameterDescription functionParameterDescription">
              <p>A git_tree object to diff from.</p> 
            </div>
          </div>
          <div class="apiParameter functionParameter apiParameterIn functionParameterIn">
            <div class="apiParameterType functionParameterType">
              <a href="/docs/reference/v0.17.0/diff/git_diff_list.html" class="apiLink objectLink">git_diff_list **</a>
            </div>
            <div class="apiParameterDirection functionParameterDirection apiParameterDirectionIn functionParameterDirectionIn">
              In
            </div>
            <div class="apiParameterName functionParameterName">
              diff
            </div>
            <div class="apiParameterDescription functionParameterDescription">
              <p>A pointer to a git_diff_list pointer that will be allocated.</p> 
            </div>
          </div>
        </div>

        <h3 class="apiReturnHeader functionReturnHeader">Returns</h3>
        <div class="apiReturn functionReturn">
          <div class="apiReturnType functionReturnType">
            int
          </div>
          <div class="apiReturnDescription functionReturnDescription">
            
          </div>
        </div>
        <h3 class="apiVersionsHeader functionVersionsHeader">Versions</h3>
        <div class="apiVersions functionVersions">
          <ul>
          <li class="apiVersionDeltaIntroduced functionVersionDeltaIntroduced">
            <a href="/docs/reference/v0.17.0/diff/git_diff_workdir_to_tree.html" class="apiVersionLink functionVersionLink">v0.17.0</a>
          </li>
          </ul>
        </div>
      </div>
